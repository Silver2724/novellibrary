{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Account(){const[user,setUser]=useState(null);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchUser=async()=>{const token=localStorage.getItem(\"token\");if(!token){//navigate(\"/login\");\nreturn;}try{const res=await fetch(\"http://18.118.102.84:8080/api/auth/me\",{headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}});// if(res.status === 401 || res.status === 403) {\n//     localStorage.removeItem(\"token\");\n//     //navigate(\"/login\");\n//     return;\n// }\nif(!res.ok)throw new Error(\"Failed to fetch user\");const data=await res.json();setUser(data);}catch(err){console.error(\"Fetch user failed: \",err);setError(\"Could not load account info\");}};fetchUser();},[navigate]);if(error)return/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error});if(!user)return/*#__PURE__*/_jsx(\"p\",{children:\"You are not logged in.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"account-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Account Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name: \"}),\" \",user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email: \"}),\" \",user.email]})]});}","map":{"version":3,"names":["useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Account","user","setUser","error","setError","navigate","fetchUser","token","localStorage","getItem","res","fetch","headers","concat","ok","Error","data","json","err","console","style","color","children","className","name","email"],"sources":["C:/Users/diya2/novellibrary/novellibrary/frontend/src/components/Account.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Account() {\r\n    const [user, setUser] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const token = localStorage.getItem(\"token\");\r\n\r\n            if(!token)  {\r\n                //navigate(\"/login\");\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const res = await fetch(\"http://18.118.102.84:8080/api/auth/me\", {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        \"Authorization\": `Bearer ${token}`\r\n                    }\r\n                });\r\n\r\n                // if(res.status === 401 || res.status === 403) {\r\n                //     localStorage.removeItem(\"token\");\r\n                //     //navigate(\"/login\");\r\n                //     return;\r\n                // }\r\n\r\n                if(!res.ok) throw new Error(\"Failed to fetch user\");\r\n\r\n                const data = await res.json();\r\n                setUser(data);\r\n            } catch (err) {\r\n                console.error(\"Fetch user failed: \", err);\r\n                setError(\"Could not load account info\");\r\n            }\r\n        };\r\n\r\n        fetchUser();\r\n    }, [navigate]);\r\n    \r\n    if(error) return <p style={{color: \"red\"}}>{error}</p>;\r\n    if(!user) return <p>You are not logged in.</p>;\r\n\r\n    return (\r\n        <div className=\"account-page\">\r\n            <h2>Account Details</h2>\r\n            <p><strong>Name: </strong> {user.name}</p>\r\n            <p><strong>Email: </strong> {user.email}</p>\r\n        </div>\r\n    );\r\n}"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,OAAOA,CAAA,CAAG,CAC9B,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGR,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACS,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAW,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAa,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAG,CAACF,KAAK,CAAG,CACR;AACA,OACJ,CAEA,GAAI,CACA,KAAM,CAAAG,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,uCAAuC,CAAE,CAC7DC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYN,KAAK,CACpC,CACJ,CAAC,CAAC,CAEF;AACA;AACA;AACA;AACA;AAEA,GAAG,CAACG,GAAG,CAACI,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,sBAAsB,CAAC,CAEnD,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,GAAG,CAACO,IAAI,CAAC,CAAC,CAC7Bf,OAAO,CAACc,IAAI,CAAC,CACjB,CAAE,MAAOE,GAAG,CAAE,CACVC,OAAO,CAAChB,KAAK,CAAC,qBAAqB,CAAEe,GAAG,CAAC,CACzCd,QAAQ,CAAC,6BAA6B,CAAC,CAC3C,CACJ,CAAC,CAEDE,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,CAACD,QAAQ,CAAC,CAAC,CAEd,GAAGF,KAAK,CAAE,mBAAON,IAAA,MAAGuB,KAAK,CAAE,CAACC,KAAK,CAAE,KAAK,CAAE,CAAAC,QAAA,CAAEnB,KAAK,CAAI,CAAC,CACtD,GAAG,CAACF,IAAI,CAAE,mBAAOJ,IAAA,MAAAyB,QAAA,CAAG,wBAAsB,CAAG,CAAC,CAE9C,mBACIvB,KAAA,QAAKwB,SAAS,CAAC,cAAc,CAAAD,QAAA,eACzBzB,IAAA,OAAAyB,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBvB,KAAA,MAAAuB,QAAA,eAAGzB,IAAA,WAAAyB,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACrB,IAAI,CAACuB,IAAI,EAAI,CAAC,cAC1CzB,KAAA,MAAAuB,QAAA,eAAGzB,IAAA,WAAAyB,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACrB,IAAI,CAACwB,KAAK,EAAI,CAAC,EAC3C,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}